<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FloatSwim Dashboard – Early Incident Overview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="An early prototype dashboard showing simulated drowning and near-drowning incident data for future awareness and trend tracking."
  />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="shell">
      <div class="nav">
        <div class="brand">
          <div class="brand-mark">FS</div>
          <div class="brand-text">
            <div class="brand-name">FloatSwim</div>
            <div class="brand-tagline">Awareness. Safety. Hope.</div>
          </div>
        </div>
        <nav>
          <a href="index.html">Home</a>
          <a class="active" href="dashboard.html">Dashboard</a>
          <a href="about.html">About</a>
          <a href="resources.html">Resources</a>
          <a href="directory.html">Directory</a>
          <a href="roadmap.html">Roadmap</a>
          <a href="share-story.html">Share a Story</a>
          <a href="index.html#get-involved">Get Involved</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <div class="shell">
      <!-- HERO -->
      <section class="hero">
        <div>
          <div class="hero-kicker">Early Dashboard Prototype</div>
          <h1>
            A calm, high-level view of <span>drowning and near-drowning incidents</span>.
          </h1>
          <p>
            This early dashboard uses simulated data to show how FloatSwim may eventually visualize real incidents: not to sensationalize, but to help
            families, communities, and partners see patterns more clearly.
          </p>
          <div class="hero-badges">
            <span class="badge">Demo data only</span>
            <span class="badge">Privacy-aware design</span>
            <span class="badge">Built to expand over time</span>
          </div>
          <div class="cta-row">
            <span class="cta-note">
              Data source (current demo): a static JSON file at <code>data/incidents.json</code>, served by GitHub Pages.
            </span>
          </div>
        </div>
      </section>

      <!-- SNAPSHOT METRICS -->
      <section id="snapshot">
        <h2>Snapshot Metrics (Demo)</h2>
        <p class="lead">
          These numbers are based on the current demo dataset. In the future, this view may reflect live or regularly updated incident data from
          carefully selected sources.
        </p>

        <div class="grid-3">
          <div class="card">
            <div class="pill">Total incidents (demo)</div>
            <h3 id="metric-total">–</h3>
            <p class="metric-text">
              Count of incidents currently in the demo dataset, including both drowning and near-drowning events.
            </p>
          </div>
          <div class="card">
            <div class="pill">Near-drowning (demo)</div>
            <h3 id="metric-near">–</h3>
            <p class="metric-text">
              Incidents where a person was rescued or revived. These often come with long-term medical or emotional impacts.
            </p>
          </div>
          <div class="card">
            <div class="pill">Drowning (demo)</div>
            <h3 id="metric-drown">–</h3>
            <p class="metric-text">
              Incidents currently marked as drowning in the demo data. Real-world views will be handled with extreme care and respect.
            </p>
          </div>
        </div>

        <div class="grid-3" style="margin-top: 1.4rem;">
          <div class="card">
            <div class="pill">States represented (demo)</div>
            <h3 id="metric-states">–</h3>
            <p class="metric-text">
              Number of distinct U.S. states in the current demo dataset. In the future, this may expand to regions and countries.
            </p>
          </div>
          <div class="card">
            <div class="pill">Last updated (demo)</div>
            <h3 id="metric-updated">–</h3>
            <p class="metric-text">
              Timestamp from the demo JSON file, indicating when this sample dataset was last changed.
            </p>
          </div>
          <div class="card">
            <div class="pill">Important note</div>
            <p>
              These numbers are for demonstration only. They do not represent live tracking, and they do not pull directly from official public safety
              databases yet.
            </p>
          </div>
        </div>
      </section>

      <!-- INCIDENT LIST -->
      <section id="incidents">
        <h2>Incident List (Demo Data)</h2>
        <p class="lead">
          Each card below represents one incident from the demo dataset at <code>data/incidents.json</code>. Real-world data will be anonymized and
          aggregated to protect privacy, especially for minors.
        </p>

        <div id="incident-cards" class="grid-3">
          <!-- Cards populated by JavaScript -->
        </div>
      </section>

      <!-- FUTURE VIEW -->
      <section>
        <h2>Future Dashboard Capabilities</h2>
        <p class="lead">
          Over time, this dashboard may evolve to include map views, trend graphs, filters by age and environment, and tools for local organizers and
          policymakers.
        </p>

        <div class="two-col">
          <div>
            <ul class="tight">
              <li>Interactive maps showing anonymized incident clusters and seasonal trends.</li>
              <li>Filters for age group, water type (pool, lake, ocean, bath), and context.</li>
              <li>Links from patterns to practical prevention steps and local resources.</li>
              <li>Exportable summaries to support grant writing and community planning.</li>
            </ul>
          </div>
          <div class="note-box">
            The dashboard’s purpose is to inform and equip—not to shock. Every design decision will be guided by respect for families and a focus on
            prevention.
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="shell footer-inner">
      <div>&copy; <span id="year"></span> FloatSwim. All rights reserved.</div>
      <div>
        <a href="index.html#why">Why this matters</a> ·
        <a href="index.html#parents">For parents</a> ·
        <a href="index.html#lessons">Lessons</a> ·
        <a href="index.html#stories">Stories</a> ·
        <a href="index.html#get-involved">Get involved</a>
      </div>
    </div>
  </footer>

  <script>
    // Set footer year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Load incidents from data/incidents.json and populate the dashboard
    async function loadIncidents() {
      try {
        const res = await fetch("data/incidents.json");
        if (!res.ok) {
          throw new Error("Network response was not ok");
        }

        const data = await res.json();
        const incidents = Array.isArray(data.incidents) ? data.incidents : [];

        // Update "last updated" metric (if present)
        if (data.last_updated) {
          document.getElementById("metric-updated").textContent = data.last_updated;
        } else {
          document.getElementById("metric-updated").textContent = "N/A";
        }

        // Basic metrics
        const total = incidents.length;
        const near = incidents.filter((i) =>
          (i.status || "").toLowerCase().includes("near")
        ).length;
        const drown = incidents.filter((i) => {
          const status = (i.status || "").toLowerCase();
          return status.includes("drown") && !status.includes("near");
        }).length;
        const statesCount = new Set(incidents.map((i) => i.state || "Unknown")).size;

        document.getElementById("metric-total").textContent = total || "0";
        document.getElementById("metric-near").textContent = near || "0";
        document.getElementById("metric-drown").textContent = drown || "0";
        document.getElementById("metric-states").textContent = statesCount || "0";

        // Populate incident cards
        const container = document.getElementById("incident-cards");

        if (!incidents.length) {
          container.innerHTML =
            '<p class="lead">No demo incidents are available yet. The dataset at <code>data/incidents.json</code> is currently empty.</p>';
          return;
        }

        container.innerHTML = incidents
          .map((incident) => {
            const date = incident.date || "Unknown date";
            const state = incident.state || "Unknown location";
            const locationType = incident.location_type || "Water setting not specified";
            const ageGroup = incident.age_group || "Age not specified";
            const status = incident.status || "Status not specified";
            const notes = incident.notes || "No additional notes provided.";

            return `
              <div class="card">
                <div class="pill">${date} · ${state}</div>
                <h3>${locationType}</h3>
                <ul class="tight">
                  <li><strong>Age group:</strong> ${ageGroup}</li>
                  <li><strong>Status:</strong> ${status}</li>
                  <li><strong>Notes:</strong> ${notes}</li>
                </ul>
              </div>
            `;
          })
          .join("");
      } catch (error) {
        console.error("Error loading incidents:", error);
        const container = document.getElementById("incident-cards");
        container.innerHTML =
          '<p class="lead">There was a problem loading the demo incident data. This is an early prototype view, and data sources may change.</p>';
        document.getElementById("metric-total").textContent = "–";
        document.getElementById("metric-near").textContent = "–";
        document.getElementById("metric-drown").textContent = "–";
        document.getElementById("metric-states").textContent = "–";
        document.getElementById("metric-updated").textContent = "N/A";
      }
    }

    loadIncidents();
  </script>
</body>
</html>
